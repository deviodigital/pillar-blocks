var assert = require('assert-extras'),
    common = require('./common');

var count = 0;

var tests = {
    after: function(done) {
        count++;
        done();
    },
    group1: {
        after: function(done) {
            count++;
            done();
        },
        'group 1 one OK': function(done) {
            assert.ok(true);
            setTimeout(done, fakeDelay);
        },
        'group 1 mutliple OKs': function(done) {
            assert.ok(true);
            assert.ok(true);
            assert.ok(true);
            setTimeout(done, fakeDelay);
        },
        'verify count': function(done) {
            assert.ok(count === 4, 'count should be incremented to 4');
            setTimeout(done, fakeDelay);
        }
    },
    group2: {
        'group 2 one OK': function(done) {
            assert.ok(true);
            setTimeout(done, fakeDelay);
        },
        'group 2 mutliple OKs': function(done) {
            assert.ok(true);
            assert.ok(true);
            assert.ok(true);
            setTimeout(done, fakeDelay);
        },
        'verify count': function(done) {
            assert.ok(count === 8, 'count should be incremented to 8');
            setTimeout(done, fakeDelay);
        }
    },
    group3: {
        after: function(done) {
            count++;
            done();
        },
        group3_1: {
            after: function(done) {
                count++;
                done();
            },
            'group 3_1 one OK': function(done) {
                assert.ok(true);
                setTimeout(done, fakeDelay);
            },
            'group 3_1 mutliple OKs': function(done) {
                assert.ok(true);
                assert.ok(true);
                assert.ok(true);
                assert.ok(true);
                assert.ok(true);
                setTimeout(done, fakeDelay);
            },
            'verify count': function(done) {
                assert.ok(count === 15, 'count should be incremented to 15');
                setTimeout(done, fakeDelay);
            }
        },
    }
};

module.exports = tests;
